<!DOCTYPE html>
<html>
  <head>
    <title>VOID - Etapa 2</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #000000">
      
      <a-entity id="void-core" 
                geometry="primitive: sphere; radius: 0.05" 
                material="color: #00FFFF; shader: flat" 
                position="0 1.5 -2"
                animation="property: scale; to: 1.2 1.2 1.2; dir: alternate; dur: 2000; loop: true">
      </a-entity>

      <a-camera position="0 1.6 0">
        <a-cursor color="#00FFFF" radius-inner="0.002" radius-outer="0.003"></a-cursor>
      </a-camera>

      <a-entity oculus-touch-controls="hand: right"></a-entity>
    </a-scene>

    <script>
      // Lógica de Voz
      const core = document.querySelector('#void-core');
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      
      recognition.lang = 'pt-BR';
      recognition.continuous = false;

      // Inicia o reconhecimento ao clicar na tela (ou gatilho do Quest)
      document.body.onmousedown = () => {
        recognition.start();
        core.setAttribute('material', 'color', '#FF00FF'); // Muda para Magenta ao ouvir
      };

      recognition.onresult = (event) => {
        const text = event.results[0][0].transcript;
        console.log("Você disse: " + text);
        core.setAttribute('material', 'color', '#00FF00'); // Verde quando entende
        
        // Aqui é onde enviaremos o 'text' para a API do Gemini na Etapa 3
        alert("VOID ouviu: " + text); 
      };

      recognition.onend = () => {
        setTimeout(() => core.setAttribute('material', 'color', '#00FFFF'), 2000);
      };
    </script>
  </body>
</html>
